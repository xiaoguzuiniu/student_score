"use strict";(self["webpackChunkmy_database"]=self["webpackChunkmy_database"]||[]).push([[708],{708:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});var l=a(6768);const o={slot:"footer",class:"dialog-footer"};function d(e,t,a,d,n,s){const i=(0,l.g2)("el-input"),r=(0,l.g2)("el-form-item"),m=(0,l.g2)("el-button"),h=(0,l.g2)("router-link"),p=(0,l.g2)("el-form"),c=(0,l.g2)("el-table-column"),u=(0,l.g2)("el-table"),b=(0,l.g2)("el-option"),F=(0,l.g2)("el-select"),g=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(p,{inline:!0,class:"demo-form-inline"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{label:"职工号"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{placeholder:"职工号",modelValue:n.tno,"onUpdate:modelValue":t[0]||(t[0]=e=>n.tno=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(m,{type:"primary",onClick:s.query},{default:(0,l.k6)((()=>[(0,l.eW)("查询")])),_:1},8,["onClick"]),(0,l.bF)(m,{type:"primary"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{to:"/admin/createteacher"},{default:(0,l.k6)((()=>[(0,l.eW)("新增职工")])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.bF)(u,{data:n.tableData,border:"",style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.bF)(c,{fixed:"",prop:"tno",label:"职工号",width:"150"}),(0,l.bF)(c,{prop:"name",label:"姓名",width:"120"}),(0,l.bF)(c,{prop:"sex",label:"性别",width:"120"}),(0,l.bF)(c,{prop:"age",label:"年龄",width:"120"}),(0,l.bF)(c,{prop:"title",label:"职称",width:"120"}),(0,l.bF)(c,{prop:"phone",label:"联系电话",width:"300"}),(0,l.bF)(c,{fixed:"right",label:"操作",width:"200"},{default:(0,l.k6)((e=>[(0,l.bF)(m,{onClick:t=>s.confirmRemove(e.row),type:"text",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("删除")])),_:2},1032,["onClick"]),(0,l.bF)(m,{onClick:t=>s.edit(e.row),type:"text",size:"small"},{default:(0,l.k6)((()=>[(0,l.eW)("编辑")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,l.bF)(g,{title:"编辑学生信息",modelValue:n.dialogVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>n.dialogVisible=e),width:"30%","before-close":e.handleClose},{default:(0,l.k6)((()=>[(0,l.bF)(p,{model:n.editForm},{default:(0,l.k6)((()=>[(0,l.bF)(r,{label:"职工号"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:n.editForm.tno,"onUpdate:modelValue":t[1]||(t[1]=e=>n.editForm.tno=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{label:"姓 名"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:n.editForm.name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.editForm.name=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{label:"性 别"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{modelValue:n.editForm.sex,"onUpdate:modelValue":t[3]||(t[3]=e=>n.editForm.sex=e),placeholder:"请选择性别"},{default:(0,l.k6)((()=>[(0,l.bF)(b,{label:"男",value:"男"}),(0,l.bF)(b,{label:"女",value:"女"})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(r,{label:"年 龄"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:n.editForm.age,"onUpdate:modelValue":t[4]||(t[4]=e=>n.editForm.age=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{label:"职 称"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:n.editForm.title,"onUpdate:modelValue":t[5]||(t[5]=e=>n.editForm.title=e)},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{label:"电 话"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:n.editForm.phone,"onUpdate:modelValue":t[6]||(t[6]=e=>n.editForm.phone=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,l.Lk)("span",o,[(0,l.bF)(m,{onClick:t[7]||(t[7]=e=>n.dialogVisible=!1)},{default:(0,l.k6)((()=>[(0,l.eW)("取消")])),_:1}),(0,l.bF)(m,{type:"primary",onClick:s.saveEdit},{default:(0,l.k6)((()=>[(0,l.eW)("保存")])),_:1},8,["onClick"])])])),_:1},8,["modelValue","before-close"])])}a(4603),a(7566),a(8721);var n={data(){return{tableData:[],form:{tno:"",name:"",sex:"",age:"",title:"",phone:""},dialogVisible:!1,editForm:{sno:"",name:"",sex:"",age:"",class:""},formLabelWidth:"80px",timer:null,tno:""}},methods:{edit(e){this.editForm={...e},this.dialogVisible=!0},saveEdit(){let e=new URLSearchParams;e.append("tno",this.editForm.tno),e.append("name",this.editForm.name),e.append("sex",this.editForm.sex),e.append("age",this.editForm.age),e.append("title",this.editForm.title),e.append("phone",this.editForm.phone),this.$axios({method:"post",url:"http://127.0.0.1:8690/updateteacher",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then((e=>{if(console.log(e.data),"successfully"==e.data.message){this.$message({type:"success",message:"操作成功!"}),this.dialogVisible=!1;let e=new URLSearchParams;this.$axios({method:"post",url:"http://127.0.0.1:8690/teacherinfo",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then((e=>{console.log(e.data),this.tableData=e.data.map((e=>({tno:e[0],name:e[1],sex:e[2],age:e[3],title:e[4],phone:e[5]})))})).catch((e=>{console.error("请求失败:",e)}))}else this.$message({type:"warning",message:"操作失败!"})})).catch((e=>{console.error("请求失败:",e)}))},confirmRemove(e){this.$confirm(`此操作将永久删除职工 ${e.name}，是否继续？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.remove(e)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},remove(e){let t=new URLSearchParams;t.append("tno",e.tno),this.$axios({method:"post",url:"http://127.0.0.1:8690/reamoveteacher",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then((e=>{console.log(e.data);let t=new URLSearchParams;this.$axios({method:"post",url:"http://127.0.0.1:8690/teacherinfo",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then((e=>{console.log(e.data),this.tableData=e.data.map((e=>({tno:e[0],name:e[1],sex:e[2],age:e[3],title:e[4],phone:e[5]})))})).catch((e=>{console.error("请求失败:",e)})),this.$message({type:"success",message:"删除成功!"})})).catch((e=>{console.error("请求失败:",e),this.$message({type:"warning",message:"删除失败!"})}))},query(){if(!this.tno)return void this.$message({type:"warning",message:"请输入职工号"});let e=new URLSearchParams;e.append("tno",this.tno),this.$axios({method:"post",url:"http://127.0.0.1:8690/queryteacher",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then((e=>{console.log(e.data),this.tableData=[{tno:e.data[0],name:e.data[1],sex:e.data[2],age:e.data[3],title:e.data[4],phone:e.data[5]}],this.$message({type:"success",message:"查询成功!"})})).catch((e=>{console.error("请求失败:",e),this.$message({type:"warning",message:"查询失败!"})}))}},mounted(){let e=new URLSearchParams;this.$axios({method:"post",url:"http://127.0.0.1:8690/teacherinfo",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then((e=>{console.log(e.data),this.tableData=e.data.map((e=>({tno:e[0],name:e[1],sex:e[2],age:e[3],title:e[4],phone:e[5]})))})).catch((e=>{console.error("请求失败:",e)}))}},s=a(1241);const i=(0,s.A)(n,[["render",d]]);var r=i}}]);
//# sourceMappingURL=708.6d12e87e.js.map